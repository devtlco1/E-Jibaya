# E-Jibaya - نظام الجباية الإلكترونية

نظام متكامل لإدارة عمليات جباية فواتير المياه باستخدام التقنيات الحديثة.

## 🚀 المميزات الجديدة

### 🔒 الأمان المحسن
- **تشفير كلمات المرور**: استخدام bcrypt مع salt rounds = 12
- **Rate Limiting**: حماية من هجمات Brute Force
- **التحقق من قوة كلمات المرور**: فحص شامل لقوة كلمة المرور
- **إنشاء كلمات مرور عشوائية**: أداة لإنشاء كلمات مرور قوية

### ⚡ تحسينات الأداء
- **Lazy Loading**: تحميل المكونات عند الحاجة
- **التخزين المؤقت**: نظام cache ذكي لتحسين سرعة التطبيق
- **ضغط الصور**: تحسين تلقائي للصور قبل الرفع
- **تحسين الاستعلامات**: تحسين استعلامات قاعدة البيانات

### 🧪 الاختبارات
- **Unit Tests**: اختبارات شاملة للمكونات والأدوات
- **Integration Tests**: اختبارات التكامل
- **E2E Tests**: اختبارات End-to-End مع Playwright
- **Coverage Reports**: تقارير تغطية الاختبارات

### 🐳 النشر والإدارة
- **Docker Support**: حاويات جاهزة للنشر
- **Docker Compose**: إدارة متعددة الخدمات
- **Nginx Configuration**: إعدادات محسنة للخادم
- **Health Checks**: فحص صحة التطبيق

## 🛠️ التقنيات المستخدمة

- **Frontend**: React 18, TypeScript, Vite
- **Styling**: Tailwind CSS
- **Database**: Supabase (PostgreSQL)
- **Authentication**: Supabase Auth
- **Testing**: Vitest, Testing Library, Playwright
- **Deployment**: Docker, Nginx

## 📦 التثبيت والتشغيل

### 1. تثبيت المتطلبات
```bash
npm install
```

### 2. إعداد متغيرات البيئة
```bash
cp env.example .env
# قم بتعديل ملف .env وإضافة بيانات Supabase
```

### 3. تشغيل التطبيق في وضع التطوير
```bash
npm run dev
```

### 4. بناء التطبيق للإنتاج
```bash
npm run build
```

### 5. معاينة الإنتاج
```bash
npm run preview
```

## 🧪 الاختبارات

### تشغيل جميع الاختبارات
```bash
npm test
```

### تشغيل الاختبارات مع واجهة المستخدم
```bash
npm run test:ui
```

### تشغيل الاختبارات مع تقرير التغطية
```bash
npm run test:coverage
```

### اختبارات End-to-End
```bash
npm run test:e2e
```

## 🐳 النشر مع Docker

### بناء الصورة
```bash
npm run docker:build
```

### تشغيل الحاوية
```bash
npm run docker:run
```

### استخدام Docker Compose
```bash
npm run docker:compose
```

### إيقاف الخدمات
```bash
npm run docker:stop
```

### عرض السجلات
```bash
npm run docker:logs
```

## 📊 إحصائيات المشروع

### نقاط القوة
- ✅ **الأمان**: تشفير قوي لكلمات المرور
- ✅ **الأداء**: تحسينات شاملة للسرعة
- ✅ **الاختبارات**: تغطية شاملة للكود
- ✅ **النشر**: حاويات جاهزة للإنتاج
- ✅ **التوثيق**: توثيق شامل للكود
- ✅ **التصميم**: واجهة مستخدم حديثة ومتجاوبة

### التحسينات المطبقة
- 🔒 **تشفير كلمات المرور** باستخدام bcrypt
- ⚡ **Lazy Loading** للمكونات الكبيرة
- 💾 **نظام التخزين المؤقت** الذكي
- 🖼️ **ضغط الصور** التلقائي
- 🛡️ **Rate Limiting** للحماية
- 🧪 **اختبارات شاملة** لجميع المكونات
- 🐳 **Docker** للنشر السهل

## 🎯 الأدوار والصلاحيات

### 👨‍💼 المدير (Admin)
- إدارة المستخدمين
- عرض جميع السجلات
- إدارة التقارير
- عرض سجلات النشاط

### 👨‍🔧 المحصل (Field Agent)
- إضافة سجلات جديدة
- رفع الصور
- تحديث البيانات
- البحث في السجلات

### 👨‍💻 الموظف (Employee)
- عرض السجلات
- تحديث البيانات
- إدارة التقارير

## 🔧 الأوامر المفيدة

### تنظيف المشروع
```bash
npm run clean
```

### إعداد المشروع من الصفر
```bash
npm run setup
```

### فحص أنواع TypeScript
```bash
npm run typecheck
```

### فحص جودة الكود
```bash
npm run lint
```

### إصلاح مشاكل الكود تلقائياً
```bash
npm run lint:fix
```

## 📱 الاستخدام

1. **تسجيل الدخول**: استخدم البيانات الافتراضية أو أنشئ حساب جديد
2. **المدير**: يمكنه الوصول لجميع الميزات
3. **المحصل**: يركز على إضافة السجلات والصور
4. **الموظف**: يمكنه عرض وتحديث البيانات

## 🚀 النشر في الإنتاج

### 1. إعداد متغيرات البيئة
```bash
# في ملف .env
VITE_SUPABASE_URL=your_production_url
VITE_SUPABASE_ANON_KEY=your_production_key
VITE_APP_ENV=production
```

### 2. بناء التطبيق
```bash
npm run build
```

### 3. النشر مع Docker
```bash
docker-compose up -d --build
```

## 📞 الدعم

لأي استفسارات أو مشاكل، يرجى التواصل مع فريق التطوير.

---

**E-Jibaya** - نظام الجباية الإلكترونية المتطور 🚀